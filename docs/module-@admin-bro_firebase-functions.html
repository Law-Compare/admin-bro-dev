<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-5L24P7Z');</script><!-- End Google Tag Manager -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminBro - Auto-generated admin panel for node.js with react @admin-bro/firebase-functions</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
    <link rel="stylesheet" type="text/css" href="fonts.css"/>
  
  
    
      <meta property="og:image" content="https://adminbro.com/splash/admin-bro.png" />
    
  
    
      <meta property="og:title" content="An Auto-generated Admin Panel for your Node.js Application" />
    
  
    
      <meta property="og:description" content="You, as a developer, provide database models, and AdminBro generates ReactJS UI which allows you (or other trusted users) to manage content." />
    
  
    
  
    
  
    
  
</head>



<body class="layout">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
             
                <a class="image" href="index.html">
                    <img src="images/logo-reg.svg" alt="logo">
                </a>
            
            
        </div>
        <div class="menu">
             
                <div class="top-buttons">
                    
                        <a  href="https://admin-bro-example-app-staging.herokuapp.com/admin"
                            target="_blank"
                            class="button is-primary is-outlined"
                        ?>
                            Demo
                        </a>
                    
                        <a  href="/tutorial-installation-instructions.html"
                            target=""
                            class="button is-primary is-outlined"
                        ?>
                            Get Started
                        </a>
                    
                        <a  href="https://join.slack.com/t/adminbro/shared_invite/zt-djsqxxpz-_YCS8UMtQ9Ade6DPuLR7Zw"
                            target=""
                            class="button is-primary"
                        ?>
                            <i class="fab fa-slack-hash fa-lg"></i> Join the community
                        </a>
                    
                </div>
                
            <div class="navigation">
                
                <div class="dropdown is-hoverable is-right">
                    <a class="dropdown-trigger link">
                        Tutorials
                        <i class="fas fa-chevron-down fa-xs"></i>
                    </a>
                    <div class="dropdown-menu">
                        <div class="dropdown-content">
                        
                            <a class="dropdown-item" href="tutorial-installation-instructions.html">
                                01. Installation instructions
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-passing-resources.html">
                                02. Adding resources
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-customizing-resources.html">
                                03. Customize resources
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-actions.html">
                                04. Customize actions
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-writing-react-components.html">
                                05. Writing your own Components
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-features.html">
                                06. Using AdminBro features
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-custom-dashboard.html">
                                07. Customize dashboard
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-rbac.html">
                                08. Role-Based Access Control
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-i18n.html">
                                09. Internationalization (i18n)
                            </a>
                        
                            <a class="dropdown-item" href="tutorial-cms.html">
                                11. Content Management System
                            </a>
                        
                        </div>
                    </div>
                </div>
                
                <a
                    href="docs.html"
                    class="link"
                >
                    API
                </a>
                
                    
                        <a
                            href="section-design-system.html"
                            class="link"
                        >
                            Design System
                        </a>
                    
                        <a
                            href="section-modules.html"
                            class="link"
                        >
                            Modules
                        </a>
                    
                
                 
                    
                        <a
                            class="link user-link no-hover"
                            href="https://github.com/SoftwareBrothers/admin-bro"
                        >
                            <i class="fab fa-github fa-3x"></i>
                        </a>
                    
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
                <div class="search-wrapper">
                    <input id="search" type="text" placeholder="Search docs..." class="input">
                </div>
            
            <nav>
                
                    
                    <h2><a href="section-modules.html">Modules</a></h2><div class="category"><h3>Modules / Plugins</h3><ul><li><a href="module-@admin-bro_express.html">@admin-bro/express</a></li><li><a href="module-@admin-bro_firebase-functions.html">@admin-bro/firebase-functions</a></li><li><a href="module-@admin-bro_hapi.html">@admin-bro/hapi</a></li><li><a href="module-@admin-bro_koa.html">@admin-bro/koa</a></li></ul><h3>Modules / Adapters</h3><ul><li><a href="module-@admin-bro_mongoose.html">@admin-bro/mongoose</a></li><li><a href="module-@admin-bro_sequelize.html">@admin-bro/sequelize</a></li><li><a href="module-@admin-bro_typeorm.html">@admin-bro/typeorm</a></li></ul><h3>Modules / Features</h3><ul><li><a href="module-@admin-bro_passwords.html">@admin-bro/passwords</a></li><li><a href="module-@admin-bro_upload.html">@admin-bro/upload</a></li></ul></div>
                    
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Module</p>
                    <h1>@admin-bro/firebase-functions</h1>
                </header>
                




<section>

<header>
    
        
            
                <div class="class-description"><p>Plugin that allows you to render AdminBro by Firebase Cloud Functions</p>
<h2>Installation</h2>
<p>Before you start make sure you have the firebase app set up
(https://firebase.google.com/docs/functions/get-started):</p>
<pre class="prettyprint source"><code>yarn global add firebase-tools
firebase login
firebase init functions
</code></pre>
<pre class="prettyprint source lang-sh"><code>cd functions
// you might need to change version of node to 10 in your package.json
yarn add admin-bro @admin-bro/firebase-functions
</code></pre>
<h2>Usage on emulator</h2>
<p>To run AdminBro locally use <code>buildHandler</code> factory method:</p>
<pre class="prettyprint source"><code>const functions = require('firebase-functions')
const { buildHandler } = require('@admin-bro/firebase-functions')

// assume that you kep all you AdminBroOptions in this file
const adminBroOptions = require('./admin/config')

const onRequestHandler = buildHandler(adminBroOptions, {
  region: 'us-central1',
  before: async () => {
    // connect with database here (i.e.)
    // if this function returns something - it will replace
    // adminBroOptions passed as first argument to buildHandler
  },
  auth: {
    secret: 'super-secret-string-which-encrypts-session',
    authenticate: async (email, password) => {
       // find user and check password
       return foundUser
    }
  }
})

exports.app = functions.https.onRequest(onRequestHandler);
</code></pre>
<p>And this is it - you have working AdminBro instance which can be checked by running:</p>
<pre class="prettyprint source lang-bash"><code>yarn serve
</code></pre>
<h2>Deploy script</h2>
<p>AdminBro bundles custom components to <code>./.adminbro</code> folder. In other plugins
(@admin-bro/express, @admin-bro/hapi) this is done on the server side.
On firebase we cannot write files in project directory so we have to bundle
files manually before the deployment.</p>
<p>In order to do this create a simple bundle script in <code>./bin/bundle.js</code> file:</p>
<pre class="prettyprint source"><code>// ./bin/bundle.js
const AdminBro = require('admin-bro');

// assume that you keep all your AdminBroOptions in this file
const adminBroOptions = require('../admin/config')

const admin = new AdminBro(adminBroOptions);
admin.initialize();
</code></pre>
<p>and run this script before the deployment with NODE_ENV set to production.</p>
<p>To simplify it, you can update scripts in your <code>package.json</code> file like this:</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;scripts&quot;: {
    &quot;bundle&quot;: &quot;NODE_ENV=production node bin/bundle&quot;,
    &quot;deploy&quot;: &quot;yarn bundle && firebase deploy --only functions && rm .adminbro/bundle.js&quot;
  }
}
</code></pre>
<p>After successful deploy we remove generated bundle.</p>
<p>Now simply run:</p>
<pre class="prettyprint source"><code>yarn deploy
</code></pre>
<p>and in a minute you will see your app on Google Cloud Functions for Firebase</p>
<h2>Do this even better.</h2>
<p>AdminBro serves 4 assets:</p>
<ul>
<li>global.bundle.js which contains react, readux, axios etc.</li>
<li>design-system.bundle.js with AdminBro Design System</li>
<li>app.bundle.js where entire AdminBro frontend application resides</li>
<li>components.bundle.js - this is the place for bundled (with <a href="AdminBro.html#.bundle">AdminBro.bundle</a>)
custom components (admin.initialize(); creates it in <code>./adminbro/bundle.js</code>)</li>
</ul>
<p>So it means that your function will have to serve these 4 assets every time user
opens page with web browser.</p>
<p>You can change that by setting AdminBroOptions.assetsCDN. So before the deployment
you can copy those files to public directory and host this directory via firebase hosting.
Next point AdminBroOptions.assetsCDN to the hosting url and you will save this 3
extra calls to your function.</p>
<p>First you will need to add <a href="https://firebase.google.com/docs/hosting">firebase hosting</a>
to your app and setup it to host files from ./public directory</p>
<p>This is how updated ./bin/bundle.js could look like:</p>
<pre class="prettyprint source"><code>const AdminBro = require('admin-bro');

// assume that you keep all your AdminBroOptions in this file
const adminBroOptions = require('../admin/config')

const admin = new AdminBro(adminBroOptions);
fs.copyFile(
  './node_modules/admin-bro/lib/frontend/assets/scripts/app-bundle.production.js',
  './public/app.bundle.js',
);
fs.copyFile(
  './node_modules/admin-bro/lib/frontend/assets/scripts/global-bundle.production.js',
  './public/global.bundle.js',
);
fs.copyFile(
  './node_modules/@admin-bro/design-system/bundle.production.js',
  './public/design-system.bundle.js',
);
admin.initialize().then(() => {
  fs.rename('./.adminbro/bundle.js', './public/components.bundle.js');
})
</code></pre>
<p>and updated deploy script:</p>
<pre class="prettyprint source"><code>&quot;deploy&quot;: &quot;yarn bundle && firebase deploy --only functions,hosting&quot;
</code></pre></div>
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js"></script></div>
        

        
            














<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="admin-bro-firebase-functions_index.js.html" class="button">View Source</a>
            <span>
                <a href="admin-bro-firebase-functions_index.js.html">admin-bro-firebase-functions/index.js</a>, <a href="admin-bro-firebase-functions_index.js.html#line1">line 1</a>
            </span>
        </p>
    
</dl>






















        
    
    </div>
    
    

    

    

    

    

    

    

    
        <div class='vertical-section'>
            <h1>Methods</h1>
            <div class="members">
            
                <div class="member">


    
    <h4 class="name" id="buildHandler">
        <a class="href-link" href="#buildHandler">#</a>
        
        <span class="code-name">
            
                buildHandler<span class="signature">(adminOptions, options)</span><span class="type-signature"> &rarr; {BuildHandlerReturn}</span>
            
        </span>
    </h4>
    

    
    
    <div class="description">
        <script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js"></script><p>Builds the handler which can be passed to firebase functions</p>
<p>usage:</p>
<pre class="prettyprint source lang-javascript"><code>const functions = require('firebase-functions')
const { buildHandler } = require('@admin-bro/firebase-functions')

const adminOptions = {...}
const region = '...'

exports.app = functions.https.onRequest(buildHandler(adminOptions, { region }));

</code></pre>
    </div>
    









    <h5>Parameters:</h5>
    
<div class="table-container">
    <table class="params table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        

            
<tr class="deep-level-0">
  
      <td class="name"><code>adminOptions</code></td>
  

  <td class="type">
  
      
<span class="param-type"><a href="AdminBroOptions.html">AdminBroOptions</a></span>


  
  </td>

  

  

  <td class="description last"><p>options which are used to initialize
AdminBro instance</p></td>
</tr>


        

            
<tr class="deep-level-0">
  
      <td class="name"><code>options</code></td>
  

  <td class="type">
  
      
<span class="param-type"><a href="module-@admin-bro_firebase-functions.html#BuildHandlerOptions">BuildHandlerOptions</a></span>


  
  </td>

  

  

  <td class="description last"><p>custom options for @admin-bro/firebase-functions
adapter</p></td>
</tr>


        
        </tbody>
    </table>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="admin-bro-firebase-functions_src_plugin.ts.html" class="button">View Source</a>
            <span>
                <a href="admin-bro-firebase-functions_src_plugin.ts.html">admin-bro-firebase-functions/src/plugin.ts</a>, <a href="admin-bro-firebase-functions_src_plugin.ts.html#line35">line 35</a>
            </span>
        </p>
    
</dl>


















    <div class='columns method-parameter'>
        <div class="column is-2"><label>Returns:</label></div>
        <div class="column is-10">
            
                    

<div class="columns">
    
    <div class='param-desc column is-7'><p>function which can be passed to firebase</p></div>
    
    
    <div class='column is-5 has-text-left'>
        <label>Type: </label>
        
<span class="param-type">BuildHandlerReturn</span>


    </div>
    
</div>

                
        </div>
    </div>




</div>
            
            </div>
        </div>
    

    
        <div class='vertical-section'>
            <h1>Type Definitions</h1>
            <div class="members">
            
                <div class="member">

    <span class="method-parameter is-pulled-right">
        <label>Type:</label>
        
<span class="param-type">object</span>


    </span>

<h4 class="name" id="BuildHandlerOptions">
    <a class="href-link" href="#BuildHandlerOptions">#</a>
    
    <span class="code-name">
        BuildHandlerOptions
    </span>
    
</h4>




<div class="description">
    <script type="text/javascript" src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js"></script>
</div>





    <h5 class="subsection-title">Properties:</h5>

    
<div class="table-container">
    <table class="props table">
        <thead>
        <tr>
            
            <th>Name</th>
            

            <th>Type</th>

            
            <th>Attributes</th>
            

            

            <th class="last">Description</th>
        </tr>
        </thead>

        <tbody>
        
            
<tr class="deep-level-0">
    
        <td class="name"><code>region</code></td>
    

    <td class="type">
    
        
<span class="param-type">string</span>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>Region where function is deployed</p></td>
</tr>

        
            
<tr class="deep-level-0">
    
        <td class="name"><code>before</code></td>
    

    <td class="type">
    
        
<span class="param-type">function</span>


    
    </td>

    
        <td class="attributes">
        
            &lt;optional><br>
        

        
        </td>
    

    

    <td class="description last"><p>Optional before <code>async</code> hook which can be used to initialize database.,
if it returns something it will be used as AdminBroOptions.</p></td>
</tr>

        
            
<tr class="deep-level-0">
    
        <td class="name"><code>auth</code></td>
    

    <td class="type">
    
        
<span class="param-type">object</span>


    
    </td>

    
        <td class="attributes">
        
            &lt;optional><br>
        

        
        </td>
    

    

    <td class="description last"><p>custom authentication option. If given AdminBro will render login page</p></td>
</tr>

  
      
<tr class="deep-level-1">
    
        <td class="name"><code>secret</code></td>
    

    <td class="type">
    
        
<span class="param-type">string</span>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>secret which is used to encrypt the session cookie</p></td>
</tr>

  
      
<tr class="deep-level-1">
    
        <td class="name"><code>authenticate</code></td>
    

    <td class="type">
    
        
<span class="param-type">function</span>


    
    </td>

    
        <td class="attributes">
        

        
        </td>
    

    

    <td class="description last"><p>authenticate function</p></td>
</tr>

  
      
<tr class="deep-level-1">
    
        <td class="name"><code>maxAge</code></td>
    

    <td class="type">
    
        
<span class="param-type">number</span>


    
    </td>

    
        <td class="attributes">
        
            &lt;optional><br>
        

        
        </td>
    

    

    <td class="description last"><p>For how long cookie session will be stored.,
Default to 900000 (15 minutes).,
In milliseconds.</p></td>
</tr>

  

        
        </tbody>
    </table>
</div>



<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    

    

    

    
        <p class="tag-source">
            <a href="admin-bro-firebase-functions_src_plugin.ts.html" class="button">View Source</a>
            <span>
                <a href="admin-bro-firebase-functions_src_plugin.ts.html">admin-bro-firebase-functions/src/plugin.ts</a>, <a href="admin-bro-firebase-functions_src_plugin.ts.html#line150">line 150</a>
            </span>
        </p>
    
</dl>





</div>
            
            </div>
        </div>
    

    
</article>

</section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

<script src="scripts/search.js"> </script>

</body>
</html>